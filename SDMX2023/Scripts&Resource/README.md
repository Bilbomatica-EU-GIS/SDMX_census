# Scripts and Resource
The python script AtomDataGenerator.py generates three types of data: 
* Find and compress the directory which contains COUNTRIES GML files, metadata files and other geo data into zip filed with specified names, and then save them to the defined location.
* Generate read.md to be included in the zip file for describing the content inside the zip file based on the readme template.
* Copy Metadata XML files to *Metadata* folder in the location as specified above.
* Generate **.atom* file with the entries of these contries, and save it to the same directory as the location of GML zip files. 

Morever, the resource files include:
* readme_template.md - the template for genertaing readme.md for every zip file. You can customize and relocating the template and then define the --readme-template, --readme-name accordingly for excuting the python script.
* Deliverables.zip - All original contries GML/XML source files for input.
<b>Note </b> : The folder name of each country should be same as the prefix of the file name(the 'country code' before the first '_'), since the 'country code' part links all data generated and with it's ATOM file entry as well. 
* quercus.rar - The free software to run PHP files in Tomcat. Copy and rename the file quercus.war by ATOM.war (or the name you want to appear in the URL) and deploy to Tomcat.

## Scripts usage
By default, the script find the contries GML files, metadata files, and other geo data from the current working folder recursively. And then generate zip files for each subfolder (the name should be the same as the country code) and the PD.atom file into the directory of 'current_working_folder/190530 PD'. Meanwhile, its generate the readme.md to be included in each zip for the description of the content of each zip based on the readme template, which is by default to be placed in the same folder as the python script. Also it copies metadata XML files to 'current_working_folder/190530 PD/Metadata'. You can deploy them in Tomcat directory of '\ATOM\PD\Data' and '\ATOM\PD\Metadata' respectively. You can define the 'root-folder' parameter to process the source files, and 'target-folder'parameter to store generated data in a different location. You also can change the atom file name and atom title, url of the atom file, readme template location, readme file name to be generated by defining --atom-name,  --atom-title, --base-url, --readme-template, --readme-name accordingly. 

<b>Note</b>: When you change the url in the generated **.atom* file, you need to change other linked atom files and related html, xml, PHP files for the deployment.
* Decompress the 'Deliverables.zip' content to a folder, and copy the AtomDataGenerator.py to the folder. 
* Open a terminal in this folder, and write in the terminal:
    
      python  AtomDataGenerator.py
* The corresponding data are generated in the 'Deliverables/190530 PD'.
### Usage options

python  AtomDataGenerator.py [options]

  Options:

    h, optional, --help
    r, optional, default-vaule:'current working directory', --root-folder="contires-FOLDER"
    t, optional, default-vaule:'current working directory/190530 PD/', --target-folder="data-FOLDER"        
    z, optional, default-vaule:'[contry code]_PD_3035_GML', --zip-name=name-second-part'    
    a, optional, default-vaule:'PD', --atom-name=ATOM file name    
    m, optional, default-vaule:'Population Distribution and Demography', --atom-title=ATOM title      
    b, optional, default-vaule:'http://localhost:8080/ATOM/', --base-url=base url  
    e, optional, default-vaule:'current working directory/readme_template.md', --readme-template=template location
    n, optional, default-vaule:'readme.md', --readme-name=readme name
   
  Examples:
  
    default usage:    
      python AtomDataGenerator.py      

    set root-folder location to "other_source_folder":
      python AtomDataGenerator.py --root-folder = "./other_folder/"

    set target-folder location to "other_folder" to store generated data, and save metadata in the subfolder "Metatdata":
      python AtomDataGenerator.py --target-folder = "./other_folder/"

    set zip-name to different suffix (to replace "_PD_3035_GML" part)
      python AtomDataGenerator.py --zip-name = "_SU_3035_GML" 

    set the name to the *.atom file to generate.
      python AtomDataGenerator.py --atom-name="SU" 

    set the title in the atom file.
      python AtomDataGenerator.py --atom-title="Statistical Units"

    set the base url in the generated *.atom file.
      python AtomDataGenerator.py --base-url="http://localhost:80/ATOM/"

    set the reame template for generating readme file in every zip file.
      python AtomDataGenerator.py --readme-template="template_location" 

    set the readme name to be generated.
      python AtomDataGenerator.py --readme-name="readme_name"

### Requirements
* Python 2.7.0 or above/ Pyhon 3.4.0 or above
* feedgen 0.7.0
* pytz 2019.1